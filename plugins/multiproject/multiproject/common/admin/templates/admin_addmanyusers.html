<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:py="http://genshi.edgewall.org/">
  <xi:include href="admin.html" />
  <head>
    <title>Users</title>
    <script type="text/javascript" src="${conf.theme_htdocs_location}/js/strings.js"></script>
    <script type="text/javascript">
        function do_confirm() {
            var addusers = document.getElementById("users");
            addusers.value = stripAll(addusers.value,true)
            if (addusers.value.length == 0)
                alert("Users missing")
            else
                var group = document.getElementById("group");
                var idx = group.selectedIndex;
                if (group.options[idx].value == 'Select group' ||Â idx == 0)
                    alert("Group selection missing")
                else
                    return confirm("Are you sure you want to add multiple users to the group "+group.options[idx].value+"?");
            return false
        }
    </script>
  </head>

  <body>
    <div style="width: 70%">
      <h2>Add many users</h2>

      <form id="revokeform" method="post" py:with="revoke_perm = 'PERMISSION_REVOKE' in perm" action="">

        <table class="listing" id="userslist">
          <thead><tr><th>Add multiple users to selected group</th></tr></thead>
        </table>

        <div>
          <div>Usernames:<br/><textarea rows="9" cols="50" name="users" id="users" style="height:auto;"></textarea></div>
          <span>Add users to group:
            <select id="group" name="group">
              <option value="">Select group</option>
              <option py:for="group in groups">${group}</option>
            </select>
          </span>
          <span><input type="checkbox" value="1" name="notify">&nbsp;Send notifications</input></span>
        </div>

        <div style="margin-top: 30px; margin-bottom:10px; height:30px;">
          <span><input type="submit" name="submit" value="${_('Submit')}" onclick="return do_confirm()" /></span>
          <span><input type="submit" name="cancel" value="${_('Cancel')}" /></span>
        </div>

        <div id="guide" class="shaded-box" style="margin-top:30px;">
          <h4>Guide</h4>
          <br />
          <p class="help">
             Use this form to add many users to your project in one quick step. <strong>Write
             one username per line</strong>.
          </p>
          <p class="help">
             Users will be automatically added to the group you select here.
          </p>
          <p class="help">
             Check "Send notifications" to send an automatic welcome message to all the
             new users. The email includes a link to visit the project immediately.
          </p>
        </div>
      </form>
    </div>
  </body>
</html>
